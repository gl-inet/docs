<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../../../favicon.png">
        

	<title>Qi: Using Arduino or Linino Firmware - GL.iNet Docs</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-108265653-1', 'glinet.com');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="https://gl-inet.com" style="padding: 10px"><img src="/img/logo.png" style="height:30px"></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Home <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../..">Home</a>
</li>

                        
                            
<li >
    <a href="../../../quick/">Quick Links</a>
</li>

                        
                            
<li >
    <a href="../../../service/">Services</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../hardware/ar150/">GL-AR150 Series</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/ar300m/">GL-AR300M Series</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/mt300a/">GL-MT300A</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/mt300n/">GL-MT300N</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/mt300n-v2/">GL-MT300N-V2</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/ar750/">GL-AR750 Series</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/mifi/">GL-MiFi Series</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/usb150/">GL-USB150 (Microuter)</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/b1300/">GL-B1300</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/6416/">GL.iNet6416</a>
</li>

                        
                            
<li >
    <a href="../../../hardware/ar300/">GL-AR300</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../setup/first-time_setup/">First-time Setup</a>
</li>

                        
                            
<li >
    <a href="../../../setup/internet_setting/">Internet Settings</a>
</li>

                        
                            
<li >
    <a href="../../../setup/mac_clone/">MAC Clone</a>
</li>

                        
                            
<li >
    <a href="../../../setup/dns/">DNS Setting</a>
</li>

                        
                            
<li >
    <a href="../../../setup/repeater_manager/">Repeater Manager</a>
</li>

                        
                            
<li >
    <a href="../../../setup/lan_ip/">LAN IP</a>
</li>

                        
                            
<li >
    <a href="../../../setup/wifi_setting/">Wi-Fi Settings (AP)</a>
</li>

                        
                            
<li >
    <a href="../../../setup/firmware/">Firmware Upgrading</a>
</li>

                        
                            
<li >
    <a href="../../../setup/modem_manager/">Momdem Manager</a>
</li>

                        
                            
<li >
    <a href="../../../setup/rtc_setting/">RTC Setting</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../dev/serial/">UART Serial</a>
</li>

                        
                            
<li >
    <a href="../../../dev/uboot/">Advanced Uboot</a>
</li>

                        
                            
<li >
    <a href="../../">Domino Kit</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Application <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../app/ssh/">SSH to the router</a>
</li>

                        
                            
<li >
    <a href="../../../app/openvpn/">OpenVPN Client</a>
</li>

                        
                            
<li >
    <a href="../../../app/tor/">Tor</a>
</li>

                        
                            
<li >
    <a href="../../../app/tether/">EasyTether</a>
</li>

                        
                            
<li >
    <a href="../../../app/ss/">Shadowsocks</a>
</li>

                        
                            
<li >
    <a href="../../../app/wireguard/">WireGuard</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Video <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../video/product_intro/">Product Intro</a>
</li>

                        
                            
<li >
    <a href="../../../video/tutor/">Tutorial</a>
</li>

                        
                            
<li >
    <a href="../../../video/review/">Customer Review</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Troubleshooting <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../troubleshooting/led/">LED Indicator</a>
</li>

                        
                            
<li >
    <a href="../../../troubleshooting/reset/">Repair or Reset</a>
</li>

                        
                            
<li >
    <a href="../../../troubleshooting/debrick/">Debrick via Uboot</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Domino Kit <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../">Getting Started</a>
</li>

                        
                            
<li >
    <a href="../../hardware/core/">Domore Core</a>
</li>

                        
                            
<li >
    <a href="../../pi/pi/">Domino Pi Baseboard</a>
</li>

                        
                            
<li >
    <a href="../../pi/single_eth/">Domino Pi - Single Eth board</a>
</li>

                        
                            
<li >
    <a href="../../pi/dual_eth/">Domino Pi - Due Eth board</a>
</li>

                        
                            
<li >
    <a href="../../pi/single_usb/">Domino Pi - Signle USB board</a>
</li>

                        
                            
<li >
    <a href="../../pi/usb_combo/">Domino Pi - 3xUSB+MicroSD combo</a>
</li>

                        
                            
<li >
    <a href="../../pi/i2s/">Domino Pi - I2S board</a>
</li>

                        
                            
<li >
    <a href="../../pi/spi_jtag/">Domino Pi - SPI/JTAG</a>
</li>

                        
                            
<li >
    <a href="../../pi/led/">Domino Pi - LED</a>
</li>

                        
                            
<li >
    <a href="../mini/">Domino Qi Mini</a>
</li>

                        
                            
<li >
    <a href="../base/">Domino Qi baseboard</a>
</li>

                        
                            
<li >
    <a href="../../pi/using/">Pi: Using the firmware</a>
</li>

                        
                            
<li >
    <a href="../../pi/compile/">Pi: Compile firmware</a>
</li>

                        
                            
<li >
    <a href="../../pi/flashing/">Pi: Flashing and debricking</a>
</li>

                        
                            
<li >
    <a href="../../pi/audio/">Pi: Playing Music</a>
</li>

                        
                            
<li >
    <a href="../../pi/serial/">Pi: Working with Serial</a>
</li>

                        
                            
<li >
    <a href="../../pi/spi/">Pi: Debricking using SPI/JTAG board</a>
</li>

                        
                            
<li >
    <a href="../">Qi: Getting Started</a>
</li>

                        
                            
<li class="active">
    <a href="./">Qi: Using Arduino or Linino Firmware</a>
</li>

                        
                            
<li >
    <a href="../nodejs/">Qi: Using NodeJS and LininoIO</a>
</li>

                        
                            
<li >
    <a href="../serial/">Qi: Using Serial</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                
                    <li>
                        <a href="https://github.com/gl-inet/docs/">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#using-arduino-yun-firmware">Using Arduino Yun Firmware</a></li>
        
            <li><a href="#using-arduino-yun-firmware_1">Using Arduino Yun Firmware</a></li>
        
            <li><a href="#using-linino-firmware">Using Linino Firmware</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="using-arduino-yun-firmware">Using Arduino Yun Firmware</h1>
<p>You can use the original Arduino Yun firmware or use Linino Yun firmware. Be sure to flash the Serial hex to your AVR first.</p>
<p>Domino Qi uboot can support Arduino and Linino firmware, so you don't risk bricking your device when you try. But please do this carefully and make sure every step works succefully.</p>
<p>The original Arduino Yun firmware is here: https://www.arduino.cc/en/Main/Software#toc8</p>
<p>The original Linino Yun firmware is here: http://download.linino.org/linino_distro/lininoIO/latest/ </p>
<h2 id="using-arduino-yun-firmware_1">Using Arduino Yun Firmware</h2>
<h3 id="method-1-doing-this-in-uboot-console">Method 1: Doing this in uboot console</h3>
<p>Connect to the serial according to <a href="../serial.html">these steps</a>.</p>
<p>Press the "Reset" button to reset the OpenWrt system. Then quickly type <code>gl</code> to enter the uboot console.</p>
<p>Change env: <code>setenv bootcmd bootm 0x9fea0000</code></p>
<pre><code>setenv bootcmd bootm 0x9fea0000
saveenv
</code></pre>

<p>Setup your tftp server and download the kernel, rootfs to your Domino Qi.</p>
<p><strong>Kernel</strong></p>
<pre><code>tftp 0x80060000 openwrt-ar71xx-generic-yun-16M-kernel.bin;
erase 0x9fea0000 +0x140000;
cp.b $fileaddr 0x9fea0000 $filesize;
</code></pre>

<p><strong>rootfs</strong></p>
<pre><code>tftp 0x80060000 openwrt-ar71xx-generic-yun-16M-rootfs-squashfs.bin;
erase 0x9f050000 +0xE50000;
cp.b $fileaddr 0x9f050000 $filesize;
</code></pre>

<p>Now type <code>reset</code> to reset your board and you will have the original Yun firmware running.</p>
<h3 id="method-2-doing-this-in-domino-qi-system">Method 2: Doing this in Domino Qi system</h3>
<p>After you boot your Domino Qi system, ssh to your system.</p>
<p>check if you can access the environment variables using <code>fw_printenv</code>.</p>
<p>If you get the following error message, you have use uboot console to flash the firmware.</p>
<pre><code>root@domino:/# fw_printenv 
Warning: Bad CRC, using default environment
bootcmd=bootp; setenv bootargs root=/dev/nfs nfsroot=${serverip}:${rootpath} ip=${ipaddr}:${serverip}:${gatewayip}:${netmask}:${hostname}::off; bootm
bootdelay=5
baudrate=115200

Don't continue if you get the above message.

</code></pre>

<p>If you don't have a <code>Bad CRC</code> message, continue with the following:</p>
<pre><code>fw_setenv bootcmd &quot;bootm 0x9fea0000&quot;
sysupgrade -v -n --force /mnt/sda1/openwrt-ar71xx-generic-yun-16M-squashfs-sysupgrade.bin 

</code></pre>

<p>If you have a <code>Bad CRC</code> message, don't do this, as this will cause your board not bootable. </p>
<h2 id="using-linino-firmware">Using Linino Firmware</h2>
<p>You can also use the Linino firmware for Arduino Yun. Linino has two branch, one is master, one is LininoIO.</p>
<p>For master branch, download from http://download.linino.org/linino_distro/master/latest/, the file names are:</p>
<ul>
<li>openwrt-ar71xx-generic-linino-yun-16M-250k-kernel.bin</li>
<li>openwrt-ar71xx-generic-linino-yun-16M-250k-rootfs-squashfs.bin</li>
<li>openwrt-ar71xx-generic-linino-yun-16M-250k-squashfs-sysupgrade.bin</li>
</ul>
<p>For LininoIO branch, download from http://download.linino.org/linino_distro/lininoIO/latest/, the file names are:</p>
<ul>
<li>lininoIO-generic-linino-yun-kernel.bin</li>
<li>lininoIO-generic-linino-yun-rootfs-squashfs.bin</li>
<li>lininoIO-generic-linino-yun-squashfs-sysupgrade.bin</li>
</ul>
<h3 id="method-1-doing-this-in-uboot-console_1">Method 1: Doing this in uboot console</h3>
<p>Connect to the serial according to <a href="../serial.html">these steps</a>.</p>
<p>Press the "Reset" button to reset the OpenWrt system. Then quickly type <code>gl</code> to enter the uboot console.</p>
<p>Change env:</p>
<pre><code>setenv bootcmd bootm 0x9fea0000
setenv bootargs console=ttyATH0,250000 board=linino-yun mem=64M rootfstype=squashfs,jffs2 noinitrd mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,14656k(rootfs),1280k(kernel),64k(nvram),64k(art),15936k@0x50000(firmware)
saveenv
</code></pre>

<p>Setup your tftp server and download the kernel, rootfs to your Domino Qi.</p>
<p>For Linino firmware</p>
<p><strong>Kernel</strong></p>
<pre><code>tftp 0x80060000 openwrt-ar71xx-generic-linino-yun-16M-250k-kernel.bin;
erase 0x9fea0000 +0x140000;
cp.b $fileaddr 0x9fea0000 $filesize;

</code></pre>

<p><strong>rootfs</strong></p>
<pre><code>tftp 0x80060000 openwrt-ar71xx-generic-linino-yun-16M-250k-rootfs-squashfs.bin;
erase 0x9f050000 +0xE50000;
cp.b $fileaddr 0x9f050000 $filesize;
</code></pre>

<p>For LininoIO firmware</p>
<p><strong>Kernel</strong></p>
<pre><code>tftp 0x80060000 lininoIO-generic-linino-yun-kernel.bin;
erase 0x9fea0000 +0x140000;
cp.b $fileaddr 0x9fea0000 $filesize;

</code></pre>

<p><strong>rootfs</strong></p>
<pre><code>tftp 0x80060000 lininoIO-generic-linino-yun-rootfs-squashfs.bin;
erase 0x9f050000 +0xE50000;
cp.b $fileaddr 0x9f050000 $filesize;
</code></pre>

<p>Finally use <code>reset</code> to reset your board and boot the firmware.</p>
<h3 id="method-2-doing-this-in-domino-qi-system_1">Method 2: Doing this in Domino Qi system</h3>
<p>If you have already boot the Domino Qi system, check if you can access the environment variables using <code>fw_printenv</code>.</p>
<p>If you get the following error message, you have to use uboot console to flash the firmware.</p>
<pre><code>root@domino:/# fw_printenv 
Warning: Bad CRC, using default environment
bootcmd=bootp; setenv bootargs root=/dev/nfs nfsroot=${serverip}:${rootpath} ip=${ipaddr}:${serverip}:${gatewayip}:${netmask}:${hostname}::off; bootm
bootdelay=5
baudrate=115200

</code></pre>

<p>If you do <strong>NOT</strong> have a <code>Bad CRC</code> message, continue with the following. Otherwise use method 1.</p>
<pre><code>fw_setenv bootcmd &quot;bootm 0x9fea0000&quot;
fw_setenv bootargs &quot;console=ttyATH0,250000 board=linino-yun mem=64M rootfstype=squashfs,jffs2 noinitrd mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,14656k(rootfs),1280k(kernel),64k(nvram),64k(art),15936k@0x50000(firmware)&quot;
</code></pre>

<p>To upgrade to Linino firmware:</p>
<pre><code>cd /tmp
wget http://download.linino.org/linino_distro/master/latest/openwrt-ar71xx-generic-linino-yun-16M-250k-squashfs-sysupgrade.bin
sysupgrade -v -n --force openwrt-ar71xx-generic-linino-yun-16M-250k-squashfs-sysupgrade.bin
</code></pre>

<p>To upgrade to LininoIO firmware:</p>
<pre><code>cd /tmp
wget http://download.linino.org/linino_distro/lininoIO/latest/lininoIO-generic-linino-yun-squashfs-sysupgrade.bin
sysupgrade -v -n --force lininoIO-generic-linino-yun-squashfs-sysupgrade.bin
</code></pre>

<p>Wait until the process finish and reset your board.</p>
<div id="disqus_thread"></div>
<script>

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//glinet.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p><a href='https://gl-inet.com/'> GL Technologies</a> 2018</p>
            
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
        <script src="../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
